#!/bin/bash

#-------------------------------------------------------------
# Variants : example : B3A2C0(B3-->L3, A-->L2, C--> v-register)
# ORDER    : C = column major, R = row major
# TRANS    : T = transpose   , N = !T
#-------------------------------------------------------------
ORDERA=C  #R
ORDERB=C  #R
ORDERC=C  #R
TRANSA=N  #T
TRANSB=N  #T
#-------------------------------------------------------------


#-------------------------------------------------------------
# ALPHA - BETA Fixed Values
#-------------------------------------------------------------
ALPHA=1.0   
BETA=0.0   
#-------------------------------------------------------------


#-------------------------------------------------------------
# Execution Minimum Time
#-------------------------------------------------------------
TIMIN=2.0 
#-------------------------------------------------------------


#-------------------------------------------------------------
# Enable (T) | Disable (F) Testing Mode
#-------------------------------------------------------------
TEST=T
#-------------------------------------------------------------


#-------------------------------------------------------------
# Enable (0) | Disable (1) Visual Mode
#-------------------------------------------------------------
VISUAL=0
#-------------------------------------------------------------

#-------------------------------------------------------------
# Micro-kernel size. Must be divisible by 4
#-------------------------------------------------------------
MR=12
NR=8
#-------------------------------------------------------------

if $(echo $1 | grep -q "batch"); then 
	echo "ERROR: Format not supported"
	exit -1
else
	source batch/null.sh
fi

mkdir -p output

taskset -c 0 ./build/test_gemm.x "" $ORDERA $ORDERB $ORDERC $TRANSA $TRANSB $ALPHA $BETA $MMIN $MMAX $MSTEP $NMIN $NMAX $NSTEP $KMIN $KMAX $KSTEP $VISUAL $TIMIN $TEST $MR $NR $1 $2

